{"meta":{"title":"蝌蚪伯的摳頂筆記","subtitle":null,"description":null,"author":"Jason C. Huang","url":"http://kaddopur.github.io/blog"},"pages":[],"posts":[{"title":"git submodule 教學","slug":"git-submodule","date":"2017-05-15T07:13:00.000Z","updated":"2017-05-16T10:08:48.000Z","comments":true,"path":"2017/05/15/git-submodule/","link":"","permalink":"http://kaddopur.github.io/blog/2017/05/15/git-submodule/","excerpt":"前言Submodules (子模組) 其實是個很常見的概念，在專案中想要引入其他專案的代碼，亦或是第三方的函式庫，被引入的庫就可以被看為是一個子模組。 在 Node.js 的專案中，子模組是由 yarn / npm 來幫我們管理其中的依賴。其他的語言也有相對應的套件管理系統，像是 Ruby 有 RubyGems，Elixir 有 hex ……等，這些套件管理系統可以利用 semver 格式的版本號來拉取想要的子模組版本。 但如果想引入的專案並沒有放在套件管理系統中，或是這個語言根本沒有對應的套件管理系統的時候，要想管理子模組就開始會變得有點麻煩。我們需要有一個比較好的方式來靈活管理我們的子模組。","text":"前言Submodules (子模組) 其實是個很常見的概念，在專案中想要引入其他專案的代碼，亦或是第三方的函式庫，被引入的庫就可以被看為是一個子模組。 在 Node.js 的專案中，子模組是由 yarn / npm 來幫我們管理其中的依賴。其他的語言也有相對應的套件管理系統，像是 Ruby 有 RubyGems，Elixir 有 hex ……等，這些套件管理系統可以利用 semver 格式的版本號來拉取想要的子模組版本。 但如果想引入的專案並沒有放在套件管理系統中，或是這個語言根本沒有對應的套件管理系統的時候，要想管理子模組就開始會變得有點麻煩。我們需要有一個比較好的方式來靈活管理我們的子模組。 git submodule 指令剛好可以在這邊派上用場，它可以用來管理巢狀的 git 專案。你可以在專案中引用其他的專案，並以該專案的提交 Hash 當做所依賴的版本號 (有點像是用 git 當做你的套件管理系統XD )，但使用的步驟稍微有點複雜，下面會說明。 常用指令新增子模組想要把一個專案當做是子模組加到你想要的路徑之下，可以用1$ git submodule add &lt;repository&gt; [&lt;path&gt;] 舉個實際的例子1$ git submodule add https://github.com/kaddopur/hexo-theme-bubuzou.git themes/bubuzou 意思就是把 hexo-theme-bubuzou 這個專案加到 theme/bubuzou 這個路徑之下。你會發現有三個檔案被改動/新增了，其中兩個你可以看得到。1234# .gitmodules[submodule &quot;themes/bubuzou&quot;] path = themes/bubuzou url = git@github.com:kaddopur/hexo-theme-bubuzou.git 12# themes/bubuzouSubproject commit 51c576971e7f8f3693bd16ea21075e45758e7432 一個是 git 幫我們產生的 .gitmodules 設定檔，其中包含了儲存庫與路徑的對應關係。而另一個是 themes/bubuzou，由外層的 git 來看，它是一個子模組當前所使用的提交 Hash。至於那個看不到的改動是在 .git/config 當中，當你要刪除子模組時要記得去清掉。 我們可以將變動存為另一個提交，如此一來即完成了子模組的新增。 提交子模組更新子模組有更動需要提交，請依照步驟如下 提交子模組更動 上傳到子模組的遠端儲存庫 提交上層專案更動 上傳到上層專案的遠端儲存庫 如果專案沒有放在遠端，則 2, 4 步可省略。若有的話，千萬記得一定要將子模組的提交上傳到遠端，不然就等著收共事者的信吧XD。 移除子模組要移除子模組有點麻煩，一共 7 個步驟 (參考) 刪掉 .git/config 中相關的段落 刪掉 .gitmodules 中相關的段落 暫存 .gitmodules 的更動 用 git rm --cached 停止追蹤子模組 刪掉 .git/modules/&lt;submodule&gt; 提交更新 真正把子模組刪除 實際的指令如下，每步一行1234567$ git submodule deinit themes/bubuzou$ vi .gitmodules$ git add .gitmodules$ git rm --cached themes/bubuzou # 後面不帶 &apos;/&apos;$ rm -rf .git/modules/themes/bubuzou$ git commit -m &apos;remove bubuzou&apos;$ rm -rf themes/bubuzou 複製包含子模組的專案直接 git clone 上層專案，你會發現子模組的資料夾存在但卻是空的。此時你要先運行1$ git submodule init 這個指令會將你在 .gitmodules 中的子模組設定寫入 .git/config 中，接下來再運行 1$ git submodule update 這個時候子模組才會真正被下載下來 結論如果你的專案常常被其他專案引用，這時就是你拆分專案成為一個子模組的好時機。但如果你是寫 Node.js 或是 Ruby，請儘量使用該語言的套件管理系統來公布你的專案以方便日後引用。真的沒有辦法了，再用 git submodule，因為它真的有點麻煩。 後記這次會寫 git submodule 的文章是因為這個部落格用了一個新主題 bubuzou，而我想要對這個主題做一些修改並加入版本控制，所以我先 fork 這個主題後，將其以子模組的方式加入我的部落格中。而文內所提到的一些指令，主要是設定部落格主題時實際用到的，我想將之記錄下來以便日後查詢，或是有人要問的時候可以少費一些唇舌直接貼這篇。在此特別感謝強者我同事湯姆餡熱心教學。","categories":[{"name":"筆記","slug":"筆記","permalink":"http://kaddopur.github.io/blog/categories/筆記/"}],"tags":[{"name":"git","slug":"git","permalink":"http://kaddopur.github.io/blog/tags/git/"},{"name":"CLI","slug":"CLI","permalink":"http://kaddopur.github.io/blog/tags/CLI/"}]},{"title":"Y2017W19","slug":"Y2017W19","date":"2017-05-13T04:00:00.000Z","updated":"2017-05-14T09:38:24.000Z","comments":true,"path":"2017/05/13/Y2017W19/","link":"","permalink":"http://kaddopur.github.io/blog/2017/05/13/Y2017W19/","excerpt":"Blog posts 使用 prettier 自動調整 JavaScript 樣式 Books 图说设计模式 看懂UML类图和时序图 创建型模式 简单工厂模式( Simple Factory Pattern )","text":"Blog posts 使用 prettier 自動調整 JavaScript 樣式 Books 图说设计模式 看懂UML类图和时序图 创建型模式 简单工厂模式( Simple Factory Pattern ) Languages iKnow! LINGVIST","categories":[{"name":"週記","slug":"週記","permalink":"http://kaddopur.github.io/blog/categories/週記/"}],"tags":[]},{"title":"使用 prettier 自動調整 JavaScript 樣式","slug":"prettier","date":"2017-05-10T09:41:00.000Z","updated":"2017-05-15T02:13:52.000Z","comments":true,"path":"2017/05/10/prettier/","link":"","permalink":"http://kaddopur.github.io/blog/2017/05/10/prettier/","excerpt":"前言prettier 是一款 JavaScript 的樣式處理工具，它類似 golang 的 gofmt 可以自動排版你的程式。除了 Vanilla JS 之外，尚支援了 ES6, jsx, Flow 以及正在開發中的 TypeScript。它是由 vjeux (Christopher Chedeau) 開發，在 github 上面約有 10,000 個 stars。 prettier 從今年一月的第一個 commit 開始到現在快半年，不過到它真正引起我的興趣，是從上週 (5/3) 釋出的 v1.3.0 開始。至於這個版本有什麼特別的功能嗎？非也。主要是因為這個版本有公開它在 Facebook 內部各專案使用 prettier 的情形。","text":"前言prettier 是一款 JavaScript 的樣式處理工具，它類似 golang 的 gofmt 可以自動排版你的程式。除了 Vanilla JS 之外，尚支援了 ES6, jsx, Flow 以及正在開發中的 TypeScript。它是由 vjeux (Christopher Chedeau) 開發，在 github 上面約有 10,000 個 stars。 prettier 從今年一月的第一個 commit 開始到現在快半年，不過到它真正引起我的興趣，是從上週 (5/3) 釋出的 v1.3.0 開始。至於這個版本有什麼特別的功能嗎？非也。主要是因為這個版本有公開它在 Facebook 內部各專案使用 prettier 的情形。 The first projects to adopt prettier were Jest, React and immutable-js. Those are small codebases in the order of hundreds of files that have their own infrastructure. There are a handful of people working on them full time.Then, Oculus and Nuclide converted their codebase over. The scale is bigger with a few thousands of files and tens of full time contributors but looks pretty similar to the first projects. The conversions went in one big codemod and that’s it. 可以看到 Facebook 的專案一個接一個開始用 prettier 來規範及管理他們的 JavaScript 樣式，而 prettier 和我們平常在用的 eslint 或是其他的 lint 工具相比之下孰優孰劣呢？ 優點 一致性 Consistency同一種表達式對於不同的人可能會有不同的寫法，使用 prettier 可以輕易保持代碼中樣式的一致式，避免個人習慣樣式的不同。 可教性 Teachability經過 prettier 調整格式之後，你可以知道 JavaScript 引擎是怎麼解析你所寫的代碼，進而幫助你養成良好的撰寫習慣來避免一些語意上的錯誤。例如： 1const x = value1 &amp;&amp; value2 || value3 &amp;&amp; value4; 會幫你加上括號 1const x = (value1 &amp;&amp; value2) || (value3 &amp;&amp; value4); 自由度 Freedom只需要專心在寫代碼這件事就好了，不用刻意去手動調整樣式。在抽函數的時候也蠻有用的。 如何使用prettier 提供了 CLI 方便你轉換檔案。你也可以將 prettier 設定在專案的工作流程中，在 commit 時自動排版並簽入至你的 repo。或是你也可以將 prettier 與你最愛的編輯器綁定，讓你在存檔時可以自動排版並看到結果。以下會分別介紹。 可以局部安裝到你的專案1$ yarn add prettier --dev 或是全局安裝1$ yarn global add prettier CLI使用方式如下，可以選擇想要轉換的檔案。1$ prettier [opts] [filename ...] 實際上使用的情形可能會像這樣1$ prettier --single-quote --write &quot;&#123;app,__&#123;tests,mocks&#125;__&#125;/**/*.js&quot; 想要知道有什麼參數可以下，可以輸入123456789$ prettierUsage: prettier [opts] [filename ...]Available options: --write Edit the file in-place. (Beware!) --list-different or -l Print filenames of files that are different from Prettier formatting. --stdin Read input from stdin. --print-width &lt;int&gt; Specify the length of line th ... 會列出所有可以用的選項 Node將 husky 和 lint-staged 加到專案的 devDependencies1$ yarn add lint-staged husky --dev 在 package.json 中填加以下 config1234567891011&#123; \"scripts\": &#123; \"precommit\": \"lint-staged\" &#125;, \"lint-staged\": &#123; \"*.js\": [ \"prettier --write\", \"git add\" ] &#125;&#125; husky 會讓專案在 git commit 時執行 “precommit” 這個命令。而在 lint-staged 中，會檢查所有被 stage 的檔案，如果有符合特定檔名，就會再運行指定的命令。 在上面的例子中，我們會在 git commit 之前，對所有被 stage 的 JavaScript 檔案運行 prettier 後，再重新 stage 更新後的檔案，以確保所有進入 repo 的代碼的樣式正確。 Editorprettier 對大部分的編輯器都有對應的工具，這邊以我的編輯器 VS Code 為例。 去 MartketPlace 下載 Prettier - JavaScript formatter。安裝完成後，可以用 CMD + Shift + P 來重新排版整個檔案，或是用 CMD + Shift + P 重排所選擇的區域。 想要調整 prettier 所使用的排版選項，可以在 User Settings 來全局更改所想要的 prettier 參數，或是也可以用 Workspace Settings 來按照不同專案設定不同選項。 結論在專案中，可以無痛導入工作流程而不用特別針對樣式錯誤去手動調整是 prettier 的一大優勢，可以讓 coding style 一次到位，也沒有撰寫代碼時多餘的打字或心理成本。 對於已經導入 eslint 並有團隊自訂 rule set 的專案，prettier 雖可以用參數調整所產出的代碼，但可以調整的地方有限，所產出的代碼也不一定會完全相符於之前的 rule set，這時必定要與團隊成員有良好溝通再行導入，畢竟“團隊的樣式就是最好的樣式”。","categories":[{"name":"筆記","slug":"筆記","permalink":"http://kaddopur.github.io/blog/categories/筆記/"}],"tags":[{"name":"prettier","slug":"prettier","permalink":"http://kaddopur.github.io/blog/tags/prettier/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://kaddopur.github.io/blog/tags/JavaScript/"},{"name":"Facebook","slug":"Facebook","permalink":"http://kaddopur.github.io/blog/tags/Facebook/"},{"name":"tool","slug":"tool","permalink":"http://kaddopur.github.io/blog/tags/tool/"}]},{"title":"Y2017W18","slug":"Y2017W18","date":"2017-05-06T04:00:00.000Z","updated":"2017-05-10T09:47:13.000Z","comments":true,"path":"2017/05/06/Y2017W18/","link":"","permalink":"http://kaddopur.github.io/blog/2017/05/06/Y2017W18/","excerpt":"Articles 開發人員的面試指南 – A developer’s guide to interviewing 面試時除了面試官問你問題，你也可以反過來詢問這間公司的工作環境、獲利手段或願景等等。文中列舉你可能會想問的問題，並依詢問對象區分為工程師、管理階層以及 CTO。很適合已有實習經驗或是想換工作的工程師閱讀。 About rel=noopener 網頁中的 &lt;a&gt; 在連至外部網站時，需要帶上 rel=&quot;noopener&quot;，以避免惡意網站利用 window.opener 來改動原始網頁。 每位認真的程式設計師都要讀的10本經典書 看過其中三本 The Pragmatic Programmer (程序員修煉之道︰從小工到專家︰評注版) The Mythical Man-month: Essays on Software Engineering 👍 (人月神話:軟體專案管理之道) Clean Code: A Handbook of Agile Software Craftsmanship (無瑕的程式碼－敏捷軟體開發技巧守則) The Clean Coder: A Code of Conduct for Professional Programmers (無瑕的程式碼番外篇－專業程式設計師的生存之道) Refactoring: Improving the Design of Existing Code (重構─改善既有程式的設計) Working Effectively with Legacy Code (修改代碼的藝術) Code Complete: A Practical Handbook of Software Construction (代碼大全 2) Head First Design Patterns 👍 (深入淺出設計模式) Peopleware: Productive Projects and Teams (Peopleware：腦力密集產業的人才管理之道) Soft Skills: The software developer’s life manual 👍(軟體技能代碼之外的生存指南)","text":"Articles 開發人員的面試指南 – A developer’s guide to interviewing 面試時除了面試官問你問題，你也可以反過來詢問這間公司的工作環境、獲利手段或願景等等。文中列舉你可能會想問的問題，並依詢問對象區分為工程師、管理階層以及 CTO。很適合已有實習經驗或是想換工作的工程師閱讀。 About rel=noopener 網頁中的 &lt;a&gt; 在連至外部網站時，需要帶上 rel=&quot;noopener&quot;，以避免惡意網站利用 window.opener 來改動原始網頁。 每位認真的程式設計師都要讀的10本經典書 看過其中三本 The Pragmatic Programmer (程序員修煉之道︰從小工到專家︰評注版) The Mythical Man-month: Essays on Software Engineering 👍 (人月神話:軟體專案管理之道) Clean Code: A Handbook of Agile Software Craftsmanship (無瑕的程式碼－敏捷軟體開發技巧守則) The Clean Coder: A Code of Conduct for Professional Programmers (無瑕的程式碼番外篇－專業程式設計師的生存之道) Refactoring: Improving the Design of Existing Code (重構─改善既有程式的設計) Working Effectively with Legacy Code (修改代碼的藝術) Code Complete: A Practical Handbook of Software Construction (代碼大全 2) Head First Design Patterns 👍 (深入淺出設計模式) Peopleware: Productive Projects and Teams (Peopleware：腦力密集產業的人才管理之道) Soft Skills: The software developer’s life manual 👍(軟體技能代碼之外的生存指南) Tools Google Lighthouse 這個 google extension 是用來檢測網頁在行動裝置上的優化程度，包含是不是 https，有沒有支援離線模式……等等。 Prettier - an opinionated JavaScript formatter. 是目前 facebook 的專案採用的 js formatter，對各種編緝器的支援也很好，還有 CLI 可以用。 Languages iKnow! LINGVIST","categories":[{"name":"週記","slug":"週記","permalink":"http://kaddopur.github.io/blog/categories/週記/"}],"tags":[{"name":"prettier","slug":"prettier","permalink":"http://kaddopur.github.io/blog/tags/prettier/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://kaddopur.github.io/blog/tags/JavaScript/"}]},{"title":"Y2017W17","slug":"Y2017W17","date":"2017-04-29T10:04:12.000Z","updated":"2017-05-05T11:00:20.000Z","comments":true,"path":"2017/04/29/Y2017W17/","link":"","permalink":"http://kaddopur.github.io/blog/2017/04/29/Y2017W17/","excerpt":"Leetcode 88. Merge Sorted Array 26. Remove Duplicates from Sorted Array 414. Third Maximum Number 448. Find All Numbers Disappeared in an Array 532. K-diff Pairs in an Array 561. Array Partition I","text":"Leetcode 88. Merge Sorted Array 26. Remove Duplicates from Sorted Array 414. Third Maximum Number 448. Find All Numbers Disappeared in an Array 532. K-diff Pairs in an Array 561. Array Partition I Books 软技能 代码之外的生存指南 - John Z. Sonmez, 王小刚 Chapter 17 ~ 71 Languages iKnow! LINGVIST","categories":[{"name":"週記","slug":"週記","permalink":"http://kaddopur.github.io/blog/categories/週記/"}],"tags":[]},{"title":"Y2017W16","slug":"Y2017W16","date":"2017-04-22T10:04:12.000Z","updated":"2017-05-05T11:00:20.000Z","comments":true,"path":"2017/04/22/Y2017W16/","link":"","permalink":"http://kaddopur.github.io/blog/2017/04/22/Y2017W16/","excerpt":"Books Programming Phoenix: Productive |&gt; Reliable |&gt; Fast - Chris McCord Chapter 4 - Ecto and Changesets Chapter 5 - Authenticating Users 软技能 代码之外的生存指南 - John Z. Sonmez, 王小刚 Chapter 1 ~ 16","text":"Books Programming Phoenix: Productive |&gt; Reliable |&gt; Fast - Chris McCord Chapter 4 - Ecto and Changesets Chapter 5 - Authenticating Users 软技能 代码之外的生存指南 - John Z. Sonmez, 王小刚 Chapter 1 ~ 16 Languages iKnow! LINGVIST Tutorials Understand the Difference Between the React Router v4 Router Types","categories":[{"name":"週記","slug":"週記","permalink":"http://kaddopur.github.io/blog/categories/週記/"}],"tags":[{"name":"Elixir","slug":"Elixir","permalink":"http://kaddopur.github.io/blog/tags/Elixir/"}]},{"title":"四年多來的第一篇","slug":"new-post-after-4-years","date":"2016-05-09T07:12:16.000Z","updated":"2017-05-05T11:27:18.000Z","comments":true,"path":"2016/05/09/new-post-after-4-years/","link":"","permalink":"http://kaddopur.github.io/blog/2016/05/09/new-post-after-4-years/","excerpt":"最近又開始想寫 blog 了，上一次有這個想法是在 4 年前用 octopress 來架靜態網站，不過才寫了兩篇就沒戲了其中一篇還是像這篇一樣的心得文QQ 希望這次能持續久一點","text":"最近又開始想寫 blog 了，上一次有這個想法是在 4 年前用 octopress 來架靜態網站，不過才寫了兩篇就沒戲了其中一篇還是像這篇一樣的心得文QQ 希望這次能持續久一點","categories":[{"name":"隨筆","slug":"隨筆","permalink":"http://kaddopur.github.io/blog/categories/隨筆/"}],"tags":[]}]}